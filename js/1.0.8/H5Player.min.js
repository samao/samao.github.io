window.H5Player=function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],l=0,h=[];l<s.length;l++)a=s[l],i[a]&&h.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(d&&d(t);h.length;)h.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={3:0};var o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=i[e]=[t,r]});t.push(n[2]=r);var o=document.getElementsByTagName("head")[0],s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=function(e){return a.p+""+({}[e]||e)+".min.js"}(e);var u=setTimeout(function(){c({type:"timeout",target:s})},12e4);function c(t){s.onerror=s.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");a.type=r,a.request=o,n[1](a)}i[e]=void 0}}s.onerror=s.onload=c,o.appendChild(s)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="//www.youtu.tv/js/1.0.8/",a.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp_name_=window.webpackJsonp_name_||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=u;return o.push([40,2]),n()}({0:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.log=2]="log",e[e.debug=3]="debug"}(r||(r={}));var i=new(function(){function e(e){void 0===e&&(e=r.error),this.level=e}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level>=r.debug&&e.length>0&&this.print(r.debug,e,"color: blue; font-weight: bold;")},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level>=r.log&&e.length>0&&this.print(r.log,e,"color: #000; font-weight: bold;")},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level>=r.warn&&e.length>0&&this.print(r.warn,e,"color: green; font-weight: bold;")},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level>=r.error&&e.length>0&&this.print(r.error,e,"color: red; font-weight: bold")},e.prototype.now=function(){return(new Date).toLocaleTimeString()},e.prototype.print=function(e,t,n){console.log("%c["+r[e].toUpperCase()+"] %c"+this.now()+" -- "+t.join(" "),n,"color: black; font-weight:normal;")},e}());t.b=i},1:function(e,t,n){"use strict";var r;!function(e){e.SCREEN_TOGGLE_CURRENT="screenToggleCurrent",e.SCREEN_TO_SCREEN="screenToScreen",e.SCREEN_CANCEL_SCREEN="screenCancelScrenn",e.SCREEN_TO_WEB="screenToWeb",e.TOGGLE_VIDEO="toggleVideo",e.VIDEO_SOURCE_CHANGE="videoSourceChange",e.START="start",e.PAUSED="paused",e.BUFFERED="buffered",e.DURATION_UPDATE="durationUpdate",e.TIME_UPDATE="timeUpdate",e.VIDEO_FINISHED="videoFinished",e.LOADED_UPDATE="loadedUpdate",e.SEEK="seek",e.SEEKED="seeked",e.VOLUME="volume",e.MUTED_TOGGLED="mutedToggled",e.LOOP_TOGGLED="loopToggled",e.DANMU_DISABLED="danmuDisabled",e.DANMU_MERGED="danmuMerged",e.DANMU_INSERT="danmuInsert",e.WS_CONNECTED="websocketConnected",e.ONLINE_UPDATE="onlineUpdate",e.TOTAL_UPDATE="totalUpdate",e.REMOVE_RENDERED="removeRendered",e.CLEAR_RENDER="clearRender",e.RENDER_WAITING="renderWaiting",e.CHANGE_STYLE="changeStyle",e.DANMU_BLOCKED="danmuBlocked",e.RECOMMEND_DATA="recommendData",e.TOGGLE_DANMU_LIST="toggleList",e.TOGGLE_NON_LIST="toggleNonList",e.FACE_TEXT_TOGGLED="faceTextToggled",e.DANMU_STYLE_TOGGLED="danmuStyleToggled",e.API_GET_VIDEO_READY="apiGetVideoReady",e.MEDIA_ATTACHED="mediaAttached",e.STREAM_READY="streamReady",e.QUALITY_READY="qualityReady",e.QUALITY_SWITCH="qialitySwitch",e.AD_CLOSE="adClose",e.AD_READY="adReady"}(r||(r={}));var i=r;n.d(t,"t",function(){return a}),n.d(t,"p",function(){return s}),n.d(t,"u",function(){return u}),n.d(t,"o",function(){return c}),n.d(t,"h",function(){return d}),n.d(t,"g",function(){return l}),n.d(t,"r",function(){return h}),n.d(t,"c",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"q",function(){return _}),n.d(t,"f",function(){return E}),n.d(t,"n",function(){return v}),n.d(t,"v",function(){return y}),n.d(t,"l",function(){return g}),n.d(t,"s",function(){return m}),n.d(t,"d",function(){return b}),n.d(t,"m",function(){return T}),n.d(t,"j",function(){return O}),n.d(t,"i",function(){return D}),n.d(t,"k",function(){return A}),n.d(t,"b",function(){return w}),n.d(t,"a",function(){return i});var o,a={type:i.TOGGLE_VIDEO},s={type:i.START},u=(i.PAUSED,{type:i.VIDEO_FINISHED}),c={type:i.SEEKED},d={type:i.MUTED_TOGGLED},l={type:i.LOOP_TOGGLED},h={type:i.TOGGLE_DANMU_LIST},p=function(e){return{type:i.BUFFERED,data:e}},f=function(e){return{type:i.DURATION_UPDATE,data:e}},_=function(e){return{type:i.TIME_UPDATE,data:e}},E=function(e){return{type:i.LOADED_UPDATE,data:e}},v=function(e){return{type:i.SEEK,data:e}},y=function(e){return{type:i.VOLUME,data:e}},g=function(e){return{type:i.RECOMMEND_DATA,data:e}},m=function(e){return{type:i.TOGGLE_NON_LIST,data:e}};!function(e){e[e.TOP=1]="TOP",e[e.BOTTOM=3]="BOTTOM",e[e.MOVE=5]="MOVE"}(o||(o={}));var b={disabled:function(e){return{type:i.DANMU_DISABLED,disabled:e}},changeMerged:function(e){return{type:i.DANMU_MERGED,data:e}},insert:function(e,t,n){return void 0===t&&(t="ASC"),void 0===n&&(n=!1),{type:i.DANMU_INSERT,data:e,order:t,immediate:n}},totalUpdate:function(e){return{type:i.TOTAL_UPDATE,data:e}},onlineUpdate:function(e){return{type:i.ONLINE_UPDATE,data:e}},removeRendered:function(e){return{type:i.REMOVE_RENDERED,data:e}},clearRender:{type:i.CLEAR_RENDER},connected:function(e){return{type:i.WS_CONNECTED,data:e}},renderWaiting:function(){return{type:i.RENDER_WAITING}},changeStyle:function(e,t){return{type:i.CHANGE_STYLE,data:{type:e,data:t}}},danmuBlocked:function(e,t){return{type:i.DANMU_BLOCKED,data:{type:e,blocked:t}}}},T={toggle:{type:i.SCREEN_TOGGLE_CURRENT},cancelScreen:{type:i.SCREEN_CANCEL_SCREEN},toScreen:function(e){return{type:i.SCREEN_TO_SCREEN,data:e}},toWeb:function(e){return{type:i.SCREEN_TO_WEB,data:e}}},O={getVideoReady:{type:i.API_GET_VIDEO_READY},mediaAttached:{type:i.MEDIA_ATTACHED},streamReady:{type:i.STREAM_READY}},D={toggleFaceText:function(e){return{type:i.FACE_TEXT_TOGGLED,data:e}},toggleDanmuStyle:function(e){return{type:i.DANMU_STYLE_TOGGLED,data:e}}},A={ready:function(e){return{type:i.QUALITY_READY,data:e}},switch:function(e){return{type:i.QUALITY_SWITCH,data:e}}},w={close:{type:i.AD_CLOSE},ready:function(e){return{type:i.AD_READY,data:e}}}},11:function(e,t,n){"use strict";var r;!function(e){e.web="web",e.screen="screen"}(r||(r={})),t.a=r},13:function(e,t,n){"use strict";var r;!function(e){e.POST="post",e.VOW="vow",e.CLOSE="close",e.ONLINE_NUMBER="onlanNumber",e.AUTH="auth",e.HEART_BEAT="heartBeat"}(r||(r={})),t.a=r},15:function(e,t,n){"use strict";n.r(t),n.d(t,"recommend",function(){return l}),n.d(t,"danmus",function(){return f}),n.d(t,"adloader",function(){return h}),n.d(t,"videoloader",function(){return p});var r=n(10),i=n.n(r),o=n(2),a=n(0),s=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},u=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},d="http://danmu.aixifan.com",l=function(){return s(void 0,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,i.a.get("/like/9987")];case 1:return[2,e.sent()]}})})},h=function(){return s(void 0,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return[4,i.a.get("/appSpreadContents/danmuad").then(function(e){return e.data.data.content.list[0]})];case 1:return[2,e.sent()]}})})},p=function(e){return s(void 0,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,i.a.get("/video/getVideo.aspx?id="+e).then(function(e){return e.data})];case 1:return[2,t.sent()]}})})},f=new(function(){function e(){this.SERVER=d+"/V4/",this._danmuTop=0,this._registerTotal=0,this._specialTotal=0}return e.prototype.load=function(e,t){return void 0===t&&(t=0),s(this,void 0,void 0,function(){var n,r,i,s;return u(this,function(u){switch(u.label){case 0:return this._vid=e,this._danmuTop=t<=300?5e3:Math.min(2e4,5e3+1e3*((t-300)/300|0)),a.b.log("[@loader]","==DM==","视频时长",t,"弹幕限制",this._danmuTop),[4,this.danmuPoolSize(e)];case 1:return n=c.apply(void 0,[u.sent(),3]),r=n[1],i=n[2],s=r+i,a.b.log("[@loader]","==DM== 弹幕池大小 "+s),o.b.fire(o.a.DANMU_TOTAL_UPDATE,s),[4,this.loadSpecial()];case 2:return u.sent(),a.b.log("[@loader]","==DM== 全部弹幕加载完成"),o.b.fire(o.a.DANMU_LOAD_COMPLETED),[2]}})})},e.prototype.danmuPoolSize=function(e){return s(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,i.a.get(d+"/size/"+e).then(function(e){return e.data})];case 1:return[2,t.sent()]}})})},e.prototype.loadSpecial=function(){return s(this,void 0,void 0,function(){var e,t;return u(this,function(n){switch(n.label){case 0:e=40735584e5,n.label=1;case 1:return[4,i.a.get(this.specialURL(e)).then(function(e){return e.data[1]})];case 2:return 0!==(t=n.sent()).length?[3,4]:(a.b.log("[@loader]","==DM==","下个弹幕池，当前锁定弹幕池无数据"),[4,this.loadRegister()]);case 3:return n.sent(),[3,10];case 4:return t.length<1e3?(a.b.log("[@loader]","==DM==","下个弹幕池，当前锁定弹幕池加载完毕,未达到上限"),o.b.fire(o.a.DANMU_PAGE_LOADED,t),[4,this.loadRegister()]):[3,6];case 5:return n.sent(),[3,10];case 6:return t.length+this._specialTotal>5e3?(a.b.log("[@loader]","==DM==","下个弹幕池，当前锁定弹幕池加载到上限值"),o.b.fire(o.a.DANMU_PAGE_LOADED,t.splice(1e3-(5e3-this._specialTotal))),[4,this.loadRegister()]):[3,8];case 7:return n.sent(),[3,10];case 8:o.b.fire(o.a.DANMU_PAGE_LOADED,t),e=t[t.length-1].c.split(",")[5],a.b.log("[@loader]","==DM==","加载下一页锁定弹幕数据"),n.label=9;case 9:return[3,1];case 10:return[2]}})})},e.prototype.loadRegister=function(){return s(this,void 0,void 0,function(){var e,t;return u(this,function(n){switch(n.label){case 0:a.b.log("[@loader]","==DM== 分页数据加载完成"),e=40735584e5,n.label=1;case 1:return[4,i.a.get(this.registerURL(e)).then(function(e){return e.data[2]})];case 2:if(0===(t=n.sent()).length)return a.b.log("[@loader]","==DM==","会员弹幕加载完毕，当前无数据"),[3,4];if(t.length<1e3)return a.b.log("[@loader]","==DM==","加载完毕，会员弹幕池加载完毕,未达到上限"),o.b.fire(o.a.DANMU_PAGE_LOADED,t),[3,4];if(t.length+this._registerTotal>this._danmuTop)return a.b.log("[@loader]","==DM==","加载完毕，会员弹幕加载到上限值"),o.b.fire(o.a.DANMU_PAGE_LOADED,t.splice(1e3-(this._danmuTop-this._registerTotal))),[3,4];o.b.fire(o.a.DANMU_PAGE_LOADED,t),a.b.log("[@loader]","==DM==","加载下一页会员弹幕数据"),e=t[t.length-1].c.split(",")[5],n.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.registerURL=function(e){return void 0===e&&(e=40735584e5),""+this.SERVER+this._vid+"_2/"+e+"/1000?order=-1"},e.prototype.specialURL=function(e){return void 0===e&&(e=40735584e5),""+this.SERVER+this._vid+"_1/"+e+"/1000?order=-1"},e}())},16:function(e,t,n){"use strict";var r,i=n(0);!function(e){e.SEND_REPORT_OK="102",e.SEND_REPORT_OK_2="101",e.SERVER_AUTHED="202",e.BAN_LIST="210",e.SEND_OK="200",e.SERVER_REDIRECT="302",e.SEND_FAIL_FORBIDDEN="401",e.SEND_FAIL_FORBIDDEN_SPECIAL_LEVEL="401.3",e.SEND_FAIL_FORBIDDEN_LEVEL="401.6",e.SEND_FAIL_FORBIDDEN_GUEST="401.9",e.SEND_FAIL_SENSITIVE="403",e.SERVER_CLOSE="404",e.SEND_FAIL_SERVER="500",e.ONLINE_NUMBER="600",e.ONLINE_LIST="601"}(r||(r={}));var o,a=r,s=n(13);!function(e){e.OPEN="open",e.CLOSE="close",e.MESSAGE="message",e.ERROR="error"}(o||(o={}));var u=o,c=n(1),d=n(8),l=function(){function e(){var e=this;this.DANMU_SERVER="ws://danmaku.acfun.cn:443",this.ONLINE_DELAY=3e4,this.HEART_DELAY=15e3,this.RETRY_TOTAL=3,this.retryTime=0,this.wsHandler=function(t){switch(t.type){case u.OPEN:e.sendAuthor();break;case u.CLOSE:i.b.warn("[@net-io]",t.type),e.dispatch(c.d.connected(!1)),e.retry();break;case u.ERROR:i.b.warn("[@net-io]",t.type);break;case u.MESSAGE:try{var n=JSON.parse(t.data),r=n.status,o=n.action;e.handleMessage(r,o,n)}catch(e){i.b.error("[@net-io]","解包出错： "+e.message)}break;default:i.b.log("[@net-io]","未处理事件",t.type)}},this.dispatch=function(t){e._store.dispatch(t)},this.heartBeat=function(){e.opened&&setTimeout(e.heartBeat,e.HEART_DELAY)},this.onlineRequest=function(){e.opened&&(e.send({action:s.a.ONLINE_NUMBER,command:"WALLE DOES NOT HAVE PENNIS"}),setTimeout(e.onlineRequest,e.ONLINE_DELAY))}}return e.instance=function(){return e._instance?e._instance:(e._instance=new e,e._instance)},e.prototype.connect=function(e){this._vid=e,this.dispose(),this._ws=new WebSocket(this.DANMU_SERVER+"/"+e),this._ws.addEventListener(u.OPEN,this.wsHandler),this._ws.addEventListener(u.CLOSE,this.wsHandler),this._ws.addEventListener(u.ERROR,this.wsHandler),this._ws.addEventListener(u.MESSAGE,this.wsHandler),i.b.log("[@net-io]","IO: connect::",this._vid)},e.prototype.listener=function(e){this._store=e},e.prototype.retry=function(){var e=this;++this.retryTime>=this.RETRY_TOTAL?i.b.warn("[@net-io]","重连失败，需要手动刷新"):(i.b.log("[@net-io]","连接失败尝试重连",this.retryTime),this.retryTask=setTimeout(function(){i.b.log("[@net-io]","重连中..."),e.connect(e._vid)},2e3))},e.prototype.sendAuthor=function(){var e={vid:this._vid,time:Date.now(),uid:d.a.uid,uid_ck:d.a.uid_ck};i.b.debug("[@net-io]","发送登录",JSON.stringify(e)),this.send({action:s.a.AUTH,command:JSON.stringify(e)})},Object.defineProperty(e.prototype,"opened",{get:function(){return!!this._ws&&this._ws.readyState===this._ws.OPEN},enumerable:!0,configurable:!0}),e.prototype.send=function(e){i.b.debug("[@net-io]",this.opened,JSON.stringify(e)),this.opened?this._ws.send(JSON.stringify(e)):i.b.warn("[@net-io]","未连接不能发送消息")},e.prototype.handleMessage=function(e,t,n){if(t)switch(t){case s.a.POST:var r=JSON.parse(n.command),o=r.stime,u=r.color,l=r.user,h=r.message,p=r.mode,f=r.size,_=r.commentid;i.b.log("[@net-io]","收到弹幕: "+h+", "+l),this.dispatch(c.d.insert({c:o+","+u+","+p+","+f+","+l+","+(Date.now()/1e3|0)+","+_,m:h},"DES",l===d.a.uid));break;case s.a.VOW:i.b.log("[@net-io]","系统消息"),i.b.warn("[@net-io]","内容："+n.command);break;case s.a.CLOSE:i.b.log("[@net-io]","服务器关闭"),this.dispose();break;default:i.b.warn("[@net-io]","未处理action: "+t)}if(e)switch(e){case a.SERVER_AUTHED:i.b.log("[@net-io]","登录服务器成功"),this.onlineRequest(),this.heartBeat(),this.dispatch(c.d.connected(!0)),this.retryTime=0;break;case a.SEND_OK:i.b.log("[@net-io]","弹幕发送成功");break;case a.ONLINE_NUMBER:i.b.debug("[@net-io]","当前在线数:"+n.msg),this.dispatch(c.d.onlineUpdate(n.msg));break;case a.SEND_REPORT_OK:case a.SEND_REPORT_OK_2:i.b.log("[@net-io]","举报成功");break;case a.SEND_FAIL_FORBIDDEN:break;case a.SEND_FAIL_FORBIDDEN_GUEST:case a.SEND_FAIL_FORBIDDEN_LEVEL:case a.SEND_FAIL_FORBIDDEN_SPECIAL_LEVEL:i.b.warn("[@net-io]","发送失败：",n.msg);break;case a.SEND_FAIL_SENSITIVE:i.b.warn("[@net-io]","发送内容包含敏感词",n.msg);break;case a.SEND_FAIL_SERVER:i.b.error("[@net-io]","弹幕服务器走丢了");break;case a.SERVER_CLOSE:i.b.warn("[@net-io]","服务器关闭");break;case a.SERVER_REDIRECT:i.b.log("[@net-io]","服务器重定向",n.msg);break;default:i.b.log("[@net-io]","未处理状态: "+e)}},e.prototype.dispose=function(){this._ws&&(this._ws.removeEventListener(u.OPEN,this.wsHandler),this._ws.removeEventListener(u.CLOSE,this.wsHandler),this._ws.removeEventListener(u.ERROR,this.wsHandler),this._ws.removeEventListener(u.MESSAGE,this.wsHandler),this.opened&&this._ws.close(),clearTimeout(this.retryTask),i.b.log("[@net-io]","websocket连接销毁"))},e}();t.a=l.instance()},17:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=window,i=r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},o=r.cancelAnimationFrame||r.webkitCancelAnimationFrame||r.mozCancelAnimationFrame||r.msCancelAnimationFrame||r.oCancelAnimationFrame||function(e){clearTimeout(e)};t.b=i.bind(r);var a=o.bind(r)},2:function(e,t,n){"use strict";var r,i=n(0);!function(e){e.DANMU_LOAD_START="danmuLoadStart",e.DANMU_PAGE_LOADED="danmuPageLoaded",e.DANMU_LOAD_COMPLETED="danmuLoadCompleted",e.DANMU_TOTAL_UPDATE="danmuTotalUpdate",e.CHANEG_PLAYER_TYPE="changePlayerType"}(r||(r={}));var o=r;n.d(t,"a",function(){return o});var a=function(){function e(){this.events=new Map}return e.prototype.on=function(e,t){var n=this.events.get(e)||[];n.push({cb:t}),this.events.has(e)||this.events.set(e,n)},e.prototype.once=function(e,t){var n=this.events.get(e)||[];n.push({once:!0,cb:t}),this.events.has(e)||this.events.set(e,n)},e.prototype.fire=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.events.get(e);if(r){var o=new Set;r.some(function(n){var r=n.once,a=void 0!==r&&r,s=n.cb,u=!1;try{u=!s.apply(null,t)}catch(t){u=!1,i.b.error("[@emit]","处理函数执行错误，跳过该处理: "+e+" => "+s)}return a||o.add({cb:s}),u})?this.events.set(e,Array.from(o)):i.b.warn("[@emit]","fire a non listener event: "+e)}else i.b.warn("[@emit]","fire a non listener event: "+e)},e.prototype.remove=function(e,t){if(void 0===t&&(t=null),!t)return this.events.delete(e);var n=this.events.get(e);if(n){var r=n.findIndex(function(e){return e.cb===t});return-1!==r&&(n.splice(r,1),!0)}return!1},e.prototype.clear=function(){this.events.clear()},e.prototype.has=function(e,t){var n=this.events.get(e);return!!n&&n.findIndex(function(e){return e.cb===t})>=0},e}();t.b=new a},26:function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a="undefined",s=function(){function e(){this._size={width:0,height:0},this.rendered=new Map,this.LINE_HEIGHT=40,this.lineMap=new Map,this._maxLine=0,this.prepareSpaceLine()}return e.prototype.prepareSpaceLine=function(){for(var e=0;e<80;++e)this.lineMap.set(e,a)},e.prototype.getNode=function(e){return this.rendered.get(e)},e.prototype.update=function(e){},e.prototype.flush=function(){},e.prototype.add=function(e){return!1},e.prototype.measure=function(e){return e.render?{width:e.render.width,height:e.render.height}:{width:0,height:0}},e.prototype.remove=function(e){if(!this.rendered.has(e))return!1;this.rendered.delete(e);for(var t=this.lineMap.entries();;){var n=t.next(),r=n.done,i=n.value;if(r)break;var s=o(i,2),u=s[0],c=s[1];if(c!==a&&c.danmu===e){this.lineMap.set(u,a);break}}return!0},e.prototype.clear=function(){var e=this;this.rendered.clear(),this.lineMap.forEach(function(t,n){return e.lineMap.set(n,a)})},Object.defineProperty(e.prototype,"width",{get:function(){return this._size.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._size.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{set:function(e){this._size=i({},e),this._maxLine=e.height/this.LINE_HEIGHT|0},enumerable:!0,configurable:!0}),e}(),u=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=4e3,t}return u(t,e),t.prototype.update=function(e){for(var t=this.rendered.values();;){var n=t.next(),r=n.done,i=n.value;if(r)break;i.established+=e;var o=this.measure(i.danmu);i.x=this.width-o.width>>1,i.y=this.height-i.line*this.LINE_HEIGHT-this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-o.height)|0,i.needRemove=i.established>=this.duration}},t.prototype.flush=function(){for(var e=this.rendered.values();;){var t=e.next(),n=t.done,r=t.value;if(n)break;var i=this.measure(r.danmu);r.x=this.width-i.width>>1,r.y=this.height-r.line*this.LINE_HEIGHT-this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-i.height)|0,r.needRemove=r.established>=this.duration}},t.prototype.freeline=function(){for(var e=this.lineMap.entries();;){var t=e.next(),n=t.done,r=c(t.value,2),i=r[0],o=r[1];if(n)break;if(i>=this._maxLine)break;if("undefined"===o)return i}return Math.random()*this.lineMap.size|0},t.prototype.add=function(e){if(this.rendered.has(e))return!1;var t=this.freeline(),n=this.measure(e),r=Date.now()-(e.renderInit||Date.now()),i={x:this.width-n.width>>1,y:this.height-t*this.LINE_HEIGHT-this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-n.height)|0,established:r,size:n,speed:6,danmu:e,line:t,needRemove:r>=this.duration};return!i.needRemove&&(this.rendered.set(e,i),this.lineMap.set(t,i),!0)},t}(s),l=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SPEED=100,t.STEP=10,t.GAP=30,t}return l(t,e),t.prototype.update=function(e){for(var t=this.rendered.values();;){var n=t.next(),r=n.done,i=n.value;if(r)break;i.established+=e,i.x=this.width-i.established*i.speed/1e3|0,i.needRemove=i.x<-i.size.width}},t.prototype.flush=function(){for(var e=this.rendered.values();;){var t=e.next(),n=t.done,r=t.value;if(n)break;r.x=this.width-r.established*r.speed/1e3|0,r.needRemove=r.x<-r.size.width}},t.prototype.findFreeLine=function(e){for(var t=this.lineMap.entries();;){var n=t.next(),r=n.done,i=n.value;if(r)break;var o=h(i,2),a=o[0],s=o[1];if(a>=this._maxLine)break;if("undefined"===s)return a;if((this.width-e*(this.SPEED+this.STEP*a)/1e3|0)-(s.x+s.size.width)>this.GAP)return a}return Math.random()*this._maxLine|0},t.prototype.add=function(e){if(this.rendered.has(e))return!1;var t=Date.now()-(e.renderInit||Date.now()),n=this.findFreeLine(t),r=this.SPEED+this.STEP*(n%3),i={x:this.width-t*r/1e3|0,y:n*this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-e.size)},o={width:e.render?e.render.width:0,height:e.size},a={x:i.x,y:i.y,established:t,size:o,speed:r,needRemove:i.x<-o.width,danmu:e,line:n};return!a.needRemove&&(this.rendered.set(e,a),this.lineMap.set(n,a),!0)},t}(s),f=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=4e3,t}return f(t,e),t.prototype.update=function(e){for(var t=this.rendered.values();;){var n=t.next(),r=n.done,i=n.value;if(r)break;i.established+=e;var o=this.measure(i.danmu);i.x=this.width-o.width>>1,i.y=i.line*this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-o.height)|0,i.needRemove=i.established>=this.duration}},t.prototype.flush=function(){for(var e=this.rendered.values();;){var t=e.next(),n=t.done,r=t.value;if(n)break;var i=this.measure(r.danmu);r.x=this.width-i.width>>1,r.y=r.line*this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-i.height)|0,r.needRemove=r.established>=this.duration}},t.prototype.freeline=function(){for(var e=this.lineMap.entries();;){var t=e.next(),n=t.done,r=_(t.value,2),i=r[0],o=r[1];if(n)break;if(i>=this._maxLine)break;if("undefined"===o)return i}return Math.random()*this._maxLine|0},t.prototype.add=function(e){if(this.rendered.has(e))return!1;var t=this.freeline(),n=this.measure(e),r=Date.now()-(e.renderInit||Date.now()),i={x:this.width-n.width>>1,y:t*this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-n.height)|0,established:r,size:n,speed:6,danmu:e,line:t,needRemove:r>=this.duration};return!i.needRemove&&(this.rendered.set(e,i),this.lineMap.set(t,i),!0)},t}(s),v=n(0),y=n(17),g=n(9),m=function(){function e(){var e=this;this.spaces=new Map,this.preTime=-1,this._pausedGap=0,this._paused=!1,this._width=0,this._height=0,this.update=function(){if(!e._paused){var t=Date.now();e.spaces.forEach(function(n){n.update(t-e.preTime-e._pausedGap)}),e._pausedGap=0,e.preTime=t,e.rafid=Object(y.b)(e.update)}},this.createSpace()}return e.instance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.createSpace=function(){this.spaces.set(g.a.BOTTOM,new d),this.spaces.set(g.a.MOVE,new p),this.spaces.set(g.a.TOP,new E),this.update()},e.prototype.addToSpace=function(e){var t=this.spaces.get(e.mode);t?t.add(e):v.b.warn("[@space-controler]","没有 "+e.mode+" 类型的渲染空间")},e.prototype.getNode=function(e){var t=this.spaces.get(e.mode);return t?t.getNode(e):null},e.prototype.removeFromSpace=function(e){var t=this.spaces.get(e.mode);t?t.remove(e):v.b.warn("[@space-controler]","没有 "+e.mode+" 类型的渲染空间")},e.prototype.clear=function(){this.spaces.forEach(function(e){return e.clear()})},e.prototype.size=function(e,t){return(e!==this._width||t!==this._height)&&(v.b.debug("[@space-controler]","当前弹幕空间",e,t),this.spaces.forEach(function(n){n.size={width:e,height:t}}),this._width=e,this._height=t,this.flush(),!0)},e.prototype.pause=function(){this._paused||(v.b.log("[@space-controler]","弹幕空间刷新暂停"),this._pausedGap=Date.now(),this._paused=!0),Object(y.a)(this.rafid)},e.prototype.resume=function(){this._paused&&(v.b.log("[@space-controler]","弹幕空间刷新恢复"),this._pausedGap=Date.now()-this._pausedGap,this._paused=!1),Object(y.a)(this.rafid),this.update()},e.prototype.flush=function(){this.spaces.forEach(function(e){e.flush()})},e}();t.a=m.instance()},3:function(e,t,n){"use strict";var r=n(0),i=n(5),o=n(9),a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},s=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},u=function(){function e(){this._ready=!1,this._list=[],this._danmuSet=new Set,this._online=0,this._waitingList=[],this._renderList=new Map,this._lastTime=e.INIT_TIME,this._merged=i.a.get("danmu_merged"),this._mergedSet=new Set,this._paused=!1,this.SEEK_GAP=2}return Object.defineProperty(e.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"danmuCount",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderList",{get:function(){return this._renderList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waitingList",{get:function(){return this._waitingList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!0,configurable:!0}),e.instance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.add=function(e){var t=e.c,n=e.m,r=e.immediate,i=a(t.split(","),7),o=i[0],s=i[1],u=i[2],c=i[3],d=i[4],l=i[6],h={time:parseFloat(o),color:parseInt(s),size:parseInt(c),mode:u,user:d,id:l,message:n,merge:this._mergedSet.has(n)};this._danmuSet.has(l)||(this._danmuSet.add(l),this._list.push(h),r&&this._waitingList.push(h),this._mergedSet.add(n))},e.prototype.append=function(e,t){var n=this;Array.isArray(e)?e.forEach(function(e){e.immediate=t,n.add(e)}):(e.immediate=t,this.add(e)),this._ready=!0,r.b.debug("[@dm-controler]","total danmus: "+this.danmuCount)},e.prototype.unshift=function(e,t){var n=e.c,r=e.m,i=a(n.split(","),7),o=i[0],s=i[1],u=i[2],c=i[3],d=i[4],l=i[6],h={time:parseFloat(o),color:parseInt(s),size:parseInt(c),mode:u,user:d,id:l,message:r,merge:this._mergedSet.has(r)};this._list.unshift(h),t&&this._waitingList.push(h),this._mergedSet.add(r)},e.prototype.push=function(e){this._list.push(e)},e.prototype.renderWaiting=function(){var e=this;if(0===this._waitingList.length)return this._prevVo;var t=[];this._waitingList.forEach(function(n){e.removeFromWaiting(n),e.isBlockedType(n)||(e._renderList.set(n.id,n),n.renderInit=Date.now(),t.push(n.message))}),r.b.debug("[@dm-controler]","render items: "+t.join("||"))},e.prototype.removeRendered=function(e){this._renderList.has(e.id)&&this._renderList.delete(e.id)},e.prototype.removeFromWaiting=function(e){this._waitingList.includes(e)&&this._waitingList.splice(this._waitingList.indexOf(e),1)},Object.defineProperty(e.prototype,"online",{get:function(){return this._online},set:function(e){this._online=e},enumerable:!0,configurable:!0}),e.prototype.isBlockedType=function(e){var t;switch(e.mode){case o.a.TOP:t="top";break;case o.a.BOTTOM:t="bottom";break;default:t="move"}var n=i.a.get("danmu_blocked");return!!n&&n[t]},e.prototype.merged=function(e){var t=this;this._merged=e,this._mergedSet.clear(),this._list.forEach(function(e){e.merge=t._mergedSet.has(e.message),t._mergedSet.add(e.message)})},e.prototype.pause=function(){r.b.log("[@dm-controler]","暂停"),this._paused=!0},e.prototype.resume=function(){r.b.log("[@dm-controler]","恢复刷新"),this._paused=!1},e.prototype.time=function(e){if(!this._paused){var t=e-this._lastTime;if(this._lastTime=e,t<=0||t>this.SEEK_GAP)return this._prevVo;var n,r=this._list.filter(function(n){var r=e-n.time;return r>=0&&r<=t&&!n.merge});(n=this._waitingList).push.apply(n,s(r))}},e.prototype.clear=function(){this._waitingList.length=0,this._renderList.clear()},e.prototype.removeAll=function(){this._waitingList.length=0,this._renderList.clear(),this._list.length=0,this._danmuSet.clear(),this._mergedSet.clear()},e.INIT_TIME=-1,e}();t.a=u.instance()},40:function(e,t,n){"use strict";n.r(t);var r,i,o=n(4),a=n(14),s=n(18),u=n(25),c=n(12),d=window.navigator&&window.navigator.userAgent||"",l=/iPad/i.test(d),h=(/iPhone/i.test(d),/iPod/i.test(d),/Mobile/i.test(d)),p=((r=d.match(/OS (\d+)_/i))&&r[1]&&r[1],/Android/i.test(d)),f=(function(){var e=d.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);t&&n&&parseFloat(e[1]+"."+e[2])}(),/Firefox/i.test(d),/Edge/i.test(d)),_=!f&&/Chrome/i.test(d),E=(function(){var e=d.match(/Chrome\/(\d+)/);e&&e[1]&&parseFloat(e[1])}(),function(){var e=/MSIE\s(\d+)\.\d/.exec(d),t=e&&parseFloat(e[1]);!t&&/Trident\/7.0/i.test(d)&&/rv:11.0/.test(d)&&(t=11)}(),/Safari/i.test(d),Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}),v=function(e,t,n,r){var i,o="";return Object.keys(t),t&&(o=Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")),n=E({movie:e,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},n),i=Object.keys(n).map(function(e){return'<param name="'+e+'" value="'+n[e]+'" />'}).join(""),r=E({data:e,width:"100%",height:"100%"},r),'<object type="application/x-shockwave-flash" style="outline:none; border: 1px solid #e6e6e6" '+Object.keys(r).map(function(e){return e+'="'+r[e]+'" '}).join("")+">"+i+"</object>"},y=(n(62),i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.render=function(){return o.createElement("div",{className:"no-suport"},o.createElement("h2",null,"#不支持的设备，请访问移动站点。#"))},t}(o.PureComponent),m=n(1),b=n(3),T=n(35),O=n(5),D=n(8),A=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},w=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(A(arguments[t]));return e},S={current:O.a.get("fulled").current,web:{fulled:!1},screen:{fulled:!1}},L={value:100,muted:O.a.get("video_muted")},R=O.a.get("video_loop"),N=O.a.get("danmu_enabled"),I={color:O.a.get("danmu_color"),size:O.a.get("danmu_size"),mode:O.a.get("danmu_mode"),alpha:O.a.get("danmu_alpha"),subtitleProtected:O.a.get("subtitle_protected"),danmuMerged:O.a.get("danmu_merged"),danmuBlocked:O.a.get("danmu_blocked")||{top:!1,bottom:!1,move:!1}},M={id:D.a.uid,uid_ck:D.a.uid_ck,logined:!1},P={vod_url:"https://video-dev.github.io/streams/x36xhzz/x36xhzz.m3u8",screen:S,qualitys:{current:"流畅",map:["蓝光","原画","超清","高清","流畅"]},volume:L,loop:R,videoState:{ended:!1,played:!0,buffered:!1},time:0,duration:0,seek:{seeking:!1,time:0},loaded:0,recommend:[],danmuEnabled:N,danmuData:{list:w(b.a.list),ready:b.a.ready,online:b.a.online,renderList:new Map(b.a.renderList),waitingList:w(b.a.waitingList),danmuCount:b.a.danmuCount},unfold:!1,nonList:!0,userOptions:I,preloader:{total:3,current:0,progress:0},popup:{faceText:!1,danmuStyle:!1},user:M,ad:{enabled:!0,imgURL:"",href:""}},U=T.fromJS(P);function G(e){var t=U.get(e);return"object"==typeof t?t.toJS():t}var C=n(11),k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},F=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},V=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(F(arguments[t]));return e},Y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},W=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Map;var Q={vod_url:function(e,t){void 0===e&&(e=G("vod_url"));var n=t.type,r=t.data;return n===m.a.VIDEO_SOURCE_CHANGE?r:e},fullscreen:function(e,t){void 0===e&&(e=G("screen"));var n=t.type,r=t.data;switch(n){case m.a.SCREEN_TO_SCREEN:return k({},e,{current:C.a.screen,screen:{fulled:r}});case m.a.SCREEN_CANCEL_SCREEN:return k({},e,{screen:{fulled:!1}});case m.a.SCREEN_TO_WEB:return k({},e,{current:C.a.web,web:{fulled:r}});case m.a.SCREEN_TOGGLE_CURRENT:return e.current===C.a.screen?k({},e,{screen:{fulled:!e.screen.fulled}}):k({},e,{web:{fulled:!e.web.fulled}});default:return e}},quality:function(e,t){void 0===e&&(e=G("qualitys"));var n=t.type,r=t.data;switch(n){case m.a.QUALITY_SWITCH:return B({},e,{current:r});case m.a.QUALITY_READY:return B({},e,{map:r})}return e},volume:function(e,t){void 0===e&&(e=G("volume"));var n=t.type,r=t.data;return n===m.a.VOLUME?Y({},e,{value:r}):n===m.a.MUTED_TOGGLED?Y({},e,{muted:!e.muted}):e},loop:function(e,t){return void 0===e&&(e=G("loop")),t.type===m.a.LOOP_TOGGLED?!e:e},videoState:function(e,t){void 0===e&&(e=G("videoState"));var n=t.type,r=t.data;return n===m.a.TOGGLE_VIDEO?H({},e,{ended:!1,played:!e.played}):n===m.a.VIDEO_FINISHED?H({},e,{ended:!0,played:!1}):n===m.a.START?H({},e,{ended:!1,played:!0}):n===m.a.BUFFERED?H({},e,{buffered:r}):n===m.a.SEEK&&e.ended?H({},e,{ended:!1}):n===m.a.QUALITY_SWITCH?H({},e,{buffered:!0}):e},time:function(e,t){void 0===e&&(e=G("time"));var n=t.type,r=t.data;return n===m.a.TIME_UPDATE?Math.round(r):e},seek:function(e,t){void 0===e&&(e=G("seek"));var n=t.type,r=t.data;return n===m.a.SEEK?{seeking:!0,time:Math.floor(r)}:n===m.a.SEEKED?x({},e,{seeking:!1}):e},duration:function(e,t){void 0===e&&(e=G("duration"));var n=t.type,r=t.data;return n===m.a.DURATION_UPDATE?Math.round(r):e},loaded:function(e,t){void 0===e&&(e=G("loaded"));var n=t.type,r=t.data;return n===m.a.LOADED_UPDATE?r:e},recommend:function(e,t){void 0===e&&(e=G("recommend"));var n=t.type,r=t.data;return n===m.a.RECOMMEND_DATA?r:e},danmuEnabled:function(e,t){void 0===e&&(e=G("danmuEnabled"));var n=t.type,r=t.disabled;return n===m.a.DANMU_DISABLED?!r:e},danmuMap:function(e,t){void 0===e&&(e=G("danmuData"));var n=t.type,r=t.data,i=t.order,o=t.immediate;switch(n){case m.a.DANMU_INSERT:return"DES"===i?b.a.unshift(r,o):b.a.append(r,o),j({},e,{list:V(b.a.list.slice(0,300)),waitingList:V(b.a.waitingList)});case m.a.TOTAL_UPDATE:return j({},e,{danmuCount:e.danmuCount+r});case m.a.TIME_UPDATE:return b.a.time(r),j({},e,{waitingList:V(b.a.waitingList)});case m.a.ONLINE_UPDATE:return b.a.online=parseInt(r),j({},e,{online:b.a.online});case m.a.RENDER_WAITING:return b.a.renderWaiting(),j({},e,{waitingList:[],renderList:new Map(b.a.renderList)});case m.a.REMOVE_RENDERED:return b.a.removeRendered(r),j({},e,{renderList:new Map(b.a.renderList)});case m.a.DANMU_MERGED:return b.a.merged(r),j({},e,{list:V(b.a.list.slice(0,300))});case m.a.CLEAR_RENDER:return b.a.clear(),j({},e,{waitingList:[],renderList:new Map(b.a.renderList)});default:return e}},unfold:function(e,t){void 0===e&&(e=G("unfold"));var n=t.type;t.data;return n===m.a.TOGGLE_DANMU_LIST?!e:e},nonList:function(e,t){void 0===e&&(e=G("nonList"));var n=t.type,r=t.data;return n===m.a.TOGGLE_NON_LIST?r:e},userOptions:function(e,t){void 0===e&&(e=G("userOptions"));var n=t.type,r=t.data;switch(n){case m.a.CHANGE_STYLE:var i={};return i[r.type]=r.data,z({},e,i);case m.a.DANMU_BLOCKED:return e.danmuBlocked[r.type]=r.blocked,z({},e,{danmuBlocked:z({},e.danmuBlocked)});case m.a.DANMU_MERGED:return z({},e,{danmuMerged:r});default:return e}},preloader:function(e,t){void 0===e&&(e=G("preloader"));var n=t.type;t.data;switch(n){case m.a.API_GET_VIDEO_READY:case m.a.MEDIA_ATTACHED:case m.a.STREAM_READY:var r=e.current+1,i=r===e.total?100:100*r/e.total;return K({},e,{current:r,progress:i});default:return e}},popup:function(e,t){void 0===e&&(e=G("popup"));var n=t.type;t.data;switch(n){case m.a.FACE_TEXT_TOGGLED:return W({},e,{faceText:!e.faceText,danmuStyle:!1});case m.a.DANMU_STYLE_TOGGLED:return W({},e,{danmuStyle:!e.danmuStyle,faceText:!1});default:return e}},user:function(e,t){void 0===e&&(e=G("user"));var n=t.type,r=t.data;return n===m.a.WS_CONNECTED?q({},e,{logined:r}):e},ad:function(e,t){void 0===e&&(e=G("ad"));var n=t.type,r=t.data;switch(n){case m.a.AD_CLOSE:return J({},e,{enabled:!1});case m.a.AD_READY:return J({},e,r);default:return e}}},X=Object(c.b)(Q),Z=n(0),$=n(15),ee=n(16),te=n(2),ne=n(26),re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ie={vid:"6069899",backgroundURL:"http://imgs.aixifan.com/content/2018_04_08/1523189114.png",debug:!0,loglevel:Z.a.error},oe=function(){function e(e,t){void 0===t&&(t=ie);var n=this;this.el=e,this.options=t,this.createFlashPlayer=function(){Z.b.log("[@index]","使用flash播放视频");var e={backgroundURL:n.options.backgroundURL,vid:n.options.vid,autoplay:n.options.autoplay?"1":"0"};n.options.proxy&&(Z.b.log("[@index]","默认回调转移",n.options.proxy),Object.assign(e,{handler:n.options.proxy})),s.isSupported()&&(Z.b.log("[@index]","支持h5播放器切换"),Object.assign(e,{h5holder:n.el.id}));n.el.innerHTML=v("loader.swf",e,{quality:"high",bgcolor:"#000000",allowscriptaccess:"always",allowfullscreen:"true",allowFullscreenInteractive:"true"},{id:"AcFunPlayer",name:"AcFunPlayer",align:"middle"}),n.type="flash"},this.build()}return e.prototype.build=function(){this.options=re({debug:!1,loglevel:Z.a.error},this.options),this.options.debug&&(this.options.loglevel=Z.a.debug),Z.b.level=this.options.loglevel,Z.b.log("========="+(new Date).toLocaleTimeString()+"========"),Z.b.log("当前播放器版本: 1.0.8"),Z.b.log("编译版本: 5d4de3f7"),Z.b.log("日志："+Z.a[Z.b.level]),Z.b.log("默认字体: pingfang SC, Microsoft Yahei, 微软雅黑, STHeiti, 黑体, sans-serif"),Z.b.log("========================="),Z.b.log("[@index]","视频ID: "+this.options.vid),h?a.render(o.createElement(g,null),this.el):s.isSupported()?this.createH5Player():this.createFlashPlayer()},e.prototype.createH5Player=function(){var e=this;if(s.isSupported()){var t=Object(c.c)(X);this.el.innerHTML="",Promise.all([n.e(0),n.e(1)]).then(n.bind(null,364)).then(function(r){var i=r.default;a.render(o.createElement(u.a,{store:t},o.createElement(i,{backgroundURL:e.options.backgroundURL,font:"pingfang SC, Microsoft Yahei, 微软雅黑, STHeiti, 黑体, sans-serif"})),e.el),ee.a.listener(t),e.register(t),Promise.resolve().then(n.bind(null,15)).then(function(t){return(0,t.videoloader)(e.options.vid)}).then(function(e){Z.b.log("[@index]","视频vid获取成功 vid="+e.id+", encode="+e.encode),t.dispatch(m.j.getVideoReady)}).catch(function(e){Z.b.error("[@index]","视频vid获取失败",e),t.dispatch(m.j.getVideoReady)})}),this.type="h5"}else Z.b.warn("[@index]","不支持H5视频播放")},e.prototype.register=function(t){var n=this;te.b.once(te.a.DANMU_LOAD_START,function(e){Z.b.log("[@index]","开始加载弹幕"),ee.a.connect(n.options.vid),$.danmus.load(n.options.vid,e)}),te.b.once(te.a.DANMU_TOTAL_UPDATE,function(e){t.dispatch(m.d.totalUpdate(e))}),te.b.on(te.a.DANMU_PAGE_LOADED,function(e){t.dispatch(m.d.insert(e))}),te.b.once(te.a.DANMU_LOAD_COMPLETED,function(){te.b.remove(te.a.DANMU_PAGE_LOADED)}),te.b.once(te.a.CHANEG_PLAYER_TYPE,function(t){"flash"===t.type&&(Z.b.log("[@index]","H5播放器切换成Flash播放器"),e.destroyPlayer(n.el),n.createFlashPlayer())})},e.change=function(t){Z.b.log("[@index]","切换H5播放器",t);var n=e.map.get(t);n&&n.createH5Player()},e.createPlayer=function(t,n){if(void 0===n&&(n=ie),!t.id)throw new Error("id不能为空");var r=new e(t,n);return e.map.set(t.id,r),r},e.destroyPlayer=function(t){var n=e.map.get(t.id);n&&("flash"===n.type?n.el.innerHTML="":(b.a.removeAll(),ne.a.clear(),te.b.clear(),ee.a.dispose(),a.unmountComponentAtNode(t)))},e.size=function(){return e.map.size},e.VERSION="1.0.8",e.map=new Map,e}();t.default=oe},5:function(e,t,n){"use strict";var r=function(e){var t;return function(n){void 0===n&&(n=300),t||(t=setTimeout(function(){e(),t=null},n))}},i=n(0),o={version:5,danmu_color:16777215,danmu_mode:"1",danmu_size:25,video_muted:!1,video_volume:1,video_loop:!1,autoplay:!1,danmu_alpha:100,subtitle_protected:!1,danmu_merged:!1,danmu_blocked:{top:!1,bottom:!1,move:!1},danmu_enabled:!0,fulled:{current:n(11).a.screen}},a=function(){function e(){var e=this;this.__KEY__="AcfunH5player::",this.flush=r(function(){localStorage.setItem(e.__KEY__,JSON.stringify(e._userSettings))});var t=localStorage.getItem(this.__KEY__);try{var n=JSON.parse(t||"");if(n.version!==o.version)return this._userSettings=o,void this.flush();this._userSettings=n}catch(e){this._userSettings=o,this.flush()}}return e.prototype.set=function(e,t){i.b.log("[@options]","localStorage save "+e+" as "+JSON.stringify(t)),this._userSettings[e]=t,this.flush()},e.prototype.get=function(e){return this._userSettings[e]},e.prototype.clear=function(){try{localStorage.removeItem(this.__KEY__)}catch(e){}},e}();t.a=new a},61:function(e,t,n){(e.exports=n(39)(!1)).push([e.i,".no-suport {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  color: red;\n}\n",""])},62:function(e,t,n){var r=n(61);"string"==typeof r&&(r=[[e.i,r,""]]);var i={attrs:{id:"player-style"},singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(38)(r,i);r.locals&&(e.exports=r.locals)},8:function(e,t,n){"use strict";var r,i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};!function(e){e.UUID="uuid",e.AC_USERNAME="ac_username",e.AC_USERIMG="ac_userimg",e.AUTH_KEY="auth_key",e.AUTH_KEY_AC_SHA1="auth_key_ac_sha1",e.AUTH_KEY_AC_SHA1_="auth_key_ac_sha1_",e.IDENTIFIER="identifier",e.USERSIG="usersig"}(r||(r={}));var o=function(){function e(){var e=this;this.cookies=new Map,this.cookie=document.cookie||"",this.cookie.split("; ").map(function(t){var n=i(t.split("="),2),r=n[0],o=n[1];e.cookies.set(r,o)})}return e.prototype.get=function(e){return this.cookies.get(e)},Object.defineProperty(e.prototype,"uid",{get:function(){return this.get(r.AUTH_KEY)||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uid_ck",{get:function(){return this.get(r.AUTH_KEY_AC_SHA1)||""},enumerable:!0,configurable:!0}),e}();t.a=new o},9:function(e,t,n){"use strict";var r;!function(e){e.TOP="5",e.MOVE="1",e.BOTTOM="4"}(r||(r={})),t.a=r}}).default;