(this.webpackJsonp_name_=this.webpackJsonp_name_||[]).push([[0],{197:function(n,e,t){"use strict";var o=function(){function n(){}return n.prototype.startup=function(n){},n.prototype.notify=function(n){},n.prototype.dispose=function(){},Object.defineProperty(n.prototype,"name",{get:function(){return""},enumerable:!1,configurable:!0}),n}();e.a=o},225:function(n,e,t){var o=t(286);"string"==typeof o&&(o=[[n.i,o,""]]);var i={attrs:{id:"qie-player-style"},singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};t(9)(o,i);o.locals&&(n.exports=o.locals)},286:function(n,e,t){(e=t(8)(!1)).push([n.i,".video-banner--300Xw {\n  position: relative;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.video-banner--300Xw * {\n  box-sizing: border-box;\n}\n.video-banner--300Xw .node--11RpD {\n  position: relative;\n  display: inline-flex;\n  flex-direction: row;\n  align-items: flex-end;\n}\n.video-banner--300Xw .node--11RpD .head--37EEi {\n  display: inline-block;\n  flex: none;\n  margin-right: -50px;\n  z-index: 1;\n}\n.video-banner--300Xw .node--11RpD .body--1ifFr {\n  position: relative;\n  display: block;\n  flex: auto;\n  line-height: 36px;\n  height: 36px;\n}\n.video-banner--300Xw .node--11RpD .body--1ifFr div {\n  position: absolute;\n  top: 5px;\n  left: 50px;\n  text-align: center;\n  width: 100%;\n}\n.video-banner--300Xw .move--1Ex2A {\n  animation-name: animate--2JPrb;\n  animation-timing-function: linear;\n  animation-fill-mode: forwards;\n}\n@keyframes animate--2JPrb {\n  from {\n    left: 100%;\n    transform: translateX(0%);\n  }\n  to {\n    left: 0;\n    transform: translateX(-100%);\n  }\n}\n",""]),e.locals={videoBanner:"video-banner--300Xw",node:"node--11RpD",head:"head--37EEi",body:"body--1ifFr",move:"move--1Ex2A",animate:"animate--2JPrb"},n.exports=e},287:function(n,e,t){var o={"./167_body.png":288,"./167_head.png":289,"./167_tail.png":290,"./1_body.png":291,"./1_head.png":292,"./1_tail.png":293,"./2_body.png":294,"./2_head.png":295,"./2_tail.png":296,"./529_body.png":297,"./529_head.png":298,"./529_tail.png":299,"./530_body.png":300,"./530_head.png":301,"./530_tail.png":302,"./534_body.png":303,"./534_head.png":304,"./534_tail.png":305,"./535_body.png":306,"./535_head.png":307,"./535_tail.png":308,"./549_body.png":309,"./549_head.png":310,"./549_tail.png":311,"./550_body.png":312,"./550_head.png":313,"./550_tail.png":314,"./551_body.png":315,"./551_head.png":316,"./551_tail.png":317,"./579_body.png":318,"./579_head.png":319,"./579_tail.png":320,"./580_body.png":321,"./580_head.png":322,"./580_tail.png":323,"./581_body.png":324,"./581_head.png":325,"./581_tail.png":326,"./582_body.png":327,"./582_head.png":328,"./582_tail.png":329,"./592_body.png":330,"./592_head.png":331,"./592_tail.png":332,"./lamp_0_body.png":333,"./lamp_0_head.png":334,"./lamp_0_tail.png":335,"./lamp_2_body.png":336,"./lamp_2_head.png":337,"./lamp_2_tail.png":338,"./luck_draw_body.png":339,"./luck_draw_head.png":340,"./luck_draw_tail.png":341,"./next_body.png":342,"./next_head.png":343,"./next_tail.png":344};function i(n){return a(n).then((function(n){return t.t(n,7)}))}function a(n){return Promise.resolve().then((function(){if(!t.o(o,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return o[n]}))}i.keys=function(){return Object.keys(o)},i.resolve=a,i.id=287,n.exports=i},288:function(n,e,t){n.exports=t.p+"banners/167_body.b9b6c1.png"},289:function(n,e,t){n.exports=t.p+"banners/167_head.ae6ee0.png"},290:function(n,e,t){n.exports=t.p+"banners/167_tail.77a0b1.png"},291:function(n,e,t){n.exports=t.p+"banners/1_body.52870e.png"},292:function(n,e,t){n.exports=t.p+"banners/1_head.4b68db.png"},293:function(n,e,t){n.exports=t.p+"banners/1_tail.0edfa9.png"},294:function(n,e,t){n.exports=t.p+"banners/2_body.8dd814.png"},295:function(n,e,t){n.exports=t.p+"banners/2_head.a137b4.png"},296:function(n,e,t){n.exports=t.p+"banners/2_tail.304e72.png"},297:function(n,e,t){n.exports=t.p+"banners/529_body.bc5f3e.png"},298:function(n,e,t){n.exports=t.p+"banners/529_head.b6f2c1.png"},299:function(n,e,t){n.exports=t.p+"banners/529_tail.0ccf4e.png"},300:function(n,e,t){n.exports=t.p+"banners/530_body.b9b6c1.png"},301:function(n,e,t){n.exports=t.p+"banners/530_head.9ecd68.png"},302:function(n,e,t){n.exports=t.p+"banners/530_tail.77a0b1.png"},303:function(n,e,t){n.exports=t.p+"banners/534_body.f4dd5a.png"},304:function(n,e,t){n.exports=t.p+"banners/534_head.dd84df.png"},305:function(n,e,t){n.exports=t.p+"banners/534_tail.432e6c.png"},306:function(n,e,t){n.exports=t.p+"banners/535_body.133748.png"},307:function(n,e,t){n.exports=t.p+"banners/535_head.515384.png"},308:function(n,e,t){n.exports=t.p+"banners/535_tail.c87b65.png"},309:function(n,e,t){n.exports=t.p+"banners/549_body.a4a237.png"},310:function(n,e,t){n.exports=t.p+"banners/549_head.271bd5.png"},311:function(n,e,t){n.exports=t.p+"banners/549_tail.cde723.png"},312:function(n,e,t){n.exports=t.p+"banners/550_body.a4a237.png"},313:function(n,e,t){n.exports=t.p+"banners/550_head.271bd5.png"},314:function(n,e,t){n.exports=t.p+"banners/550_tail.cde723.png"},315:function(n,e,t){n.exports=t.p+"banners/551_body.20c5cb.png"},316:function(n,e,t){n.exports=t.p+"banners/551_head.1d8e86.png"},317:function(n,e,t){n.exports=t.p+"banners/551_tail.3a7974.png"},318:function(n,e,t){n.exports=t.p+"banners/579_body.a4a237.png"},319:function(n,e,t){n.exports=t.p+"banners/579_head.271bd5.png"},320:function(n,e,t){n.exports=t.p+"banners/579_tail.cde723.png"},321:function(n,e,t){n.exports=t.p+"banners/580_body.a4a237.png"},322:function(n,e,t){n.exports=t.p+"banners/580_head.271bd5.png"},323:function(n,e,t){n.exports=t.p+"banners/580_tail.798ade.png"},324:function(n,e,t){n.exports=t.p+"banners/581_body.fc40f2.png"},325:function(n,e,t){n.exports=t.p+"banners/581_head.210c96.png"},326:function(n,e,t){n.exports=t.p+"banners/581_tail.c4a1e9.png"},327:function(n,e,t){n.exports=t.p+"banners/582_body.29789b.png"},328:function(n,e,t){n.exports=t.p+"banners/582_head.206387.png"},329:function(n,e,t){n.exports=t.p+"banners/582_tail.022e38.png"},330:function(n,e,t){n.exports=t.p+"banners/592_body.104618.png"},331:function(n,e,t){n.exports=t.p+"banners/592_head.e8bec5.png"},332:function(n,e,t){n.exports=t.p+"banners/592_tail.5aa2c0.png"},333:function(n,e,t){n.exports=t.p+"banners/lamp_0_body.4cd312.png"},334:function(n,e,t){n.exports=t.p+"banners/lamp_0_head.b40d69.png"},335:function(n,e,t){n.exports=t.p+"banners/lamp_0_tail.395999.png"},336:function(n,e,t){n.exports=t.p+"banners/lamp_2_body.62167f.png"},337:function(n,e,t){n.exports=t.p+"banners/lamp_2_head.64fc02.png"},338:function(n,e,t){n.exports=t.p+"banners/lamp_2_tail.71abc7.png"},339:function(n,e,t){n.exports=t.p+"banners/luck_draw_body.ee54de.png"},340:function(n,e,t){n.exports=t.p+"banners/luck_draw_head.1478cd.png"},341:function(n,e,t){n.exports=t.p+"banners/luck_draw_tail.2503a6.png"},342:function(n,e,t){n.exports=t.p+"banners/next_body.a4a237.png"},343:function(n,e,t){n.exports=t.p+"banners/next_head.66ca7e.png"},344:function(n,e,t){n.exports=t.p+"banners/next_tail.798ade.png"},40:function(n,e,t){"use strict";t.r(e);var o=t(197),i=t(2),a=t(10),r=t.n(a),p=new Map;function s(n,e){var t=encodeURIComponent(n);p.has(t)?e(p.get(t)):function(n,e){r()({url:n,responseType:"blob"}).then((function(n){return n.data})).then((function(n){return URL.createObjectURL(n)})).then((function(t){p.set(encodeURIComponent(n),t),e(t)})).catch((function(){i.a.warn("\u56fe\u7247\u65e0\u6cd5\u672c\u5730\u5316",n),e(n)}))}(n,e)}var d,c=t(0),l=t(225),u=t.n(l),f=function(){var n=this;this.jumpUrl="",this.deteTime=0,this.bodyWidth=0,this.nodeDiv=document.createElement("div"),this.headImg=document.createElement("img"),this.bodyImg=document.createElement("img"),this.tailImg=document.createElement("img"),this.infoPara=document.createElement("p"),this.containerDiv=document.createElement("div"),this.setData=function(e,t){n.player=t,n.jumpUrl=e.jumpUrl,n.bodyWidth=e.bodyWidth,s(e.headUrl,n.setHeadUrl),s(e.bodyUrl,n.setBodyUrl),s(e.tailUrl,n.setTailUrl),n.infoPara.innerHTML=e.content,n.bodyImg.style.width=e.bodyWidth+"px",e.jumpUrl?(n.nodeDiv.style.pointerEvents="auto",n.nodeDiv.style.cursor="pointer",n.nodeDiv.removeEventListener("click",n.jump),n.nodeDiv.addEventListener("click",n.jump)):(n.nodeDiv.style.pointerEvents="none",n.nodeDiv.style.cursor="auto",n.nodeDiv.removeEventListener("click",n.jump))},this.start=function(e,t){n.deteTime=t,n.nodeDiv.style.transform="translate3d(".concat(e,"px)"),n.nodeDiv.classList.add(u.a.move),n.nodeDiv.style.animationDuration="".concat(n.deteTime,"s")},this.jump=function(){"next"===n.jumpUrl?n.player.dispatch({type:c.a.SHOW_NEXT_BOX_DIALOG}):window.open(n.jumpUrl)},this.setHeadUrl=function(e){n.headImg.src=e},this.setBodyUrl=function(e){n.bodyImg.src=e},this.setTailUrl=function(e){n.tailImg.src=e},this.setHeadImg=function(n){n.style.zIndex="2",n.style.marginRight="-50px",n.style.width="100px",n.style.height="100px"},this.setBodyImg=function(n){n.style.marginTop="32px",n.style.height="36px"},this.setTailImg=function(n){n.style.marginTop="32px",n.style.marginLeft="-1px",n.style.height="36px"},this.setInfoPara=function(n){n.style.position="absolute",n.style.top="32px",n.style.left="120px",n.style.lineHeight="36px"},this.setContainerDiv=function(n){n.style.display="flex"},this.setNodeDiv=function(n){n.style.position="absolute"},this.setHeadImg(this.headImg),this.setBodyImg(this.bodyImg),this.setTailImg(this.tailImg),this.setContainerDiv(this.containerDiv),this.containerDiv.append(this.headImg,this.bodyImg,this.tailImg),this.setNodeDiv(this.nodeDiv),this.nodeDiv.append(this.containerDiv),this.setInfoPara(this.infoPara),this.nodeDiv.append(this.infoPara)},h=function(){function n(n,e){var t=this;this.root=n,this.items=[],this.caches=[],this.renders=[],this.container=document.createElement("div"),this.add=function(n){var e=t.caches.shift();e||(e=new f),e.setData(n,t.player),t.items.push(e)},this.start=function(){t.renderInterval=setInterval(t.renderNode,1e3)},this.stop=function(){clearInterval(t.renderInterval)},this.initNode=function(){0===t.renders.length&&t.addNode()},this.addNode=function(){if(0!==t.items.length){var n=t.items.shift();if(n){var e=t.container.clientWidth,o=(e+n.bodyWidth+150)/150;n.start(e,o),t.renders.push(n),t.container.append(n.nodeDiv)}}},this.nextNode=function(){if(0!==t.renders.length&&0!==t.items.length){var n=t.renders[t.renders.length-1],e=t.items[0],o=t.container.clientWidth,i=e.bodyWidth+150;o+n.bodyWidth+150-150*n.deteTime>=i&&t.addNode()}},this.renderNode=function(){t.initNode(),t.nextNode(),t.renders.forEach((function(n,e){n.deteTime-=1,n.deteTime<0&&(t.container.removeChild(n.nodeDiv),t.renders.splice(e,1),t.caches.push(n))}))},this.player=e,this.container.classList.add(u.a.videoBanner),n.append(this.container)}return Object.defineProperty(n.prototype,"visiable",{set:function(n){!n&&this.root.contains(this.container)?(this.container.remove(),this.clear(),this.stop()):n&&!this.root.contains(this.container)&&(this.root.append(this.container),this.start())},enumerable:!1,configurable:!0}),n.prototype.clear=function(){var n=this;this.renders.forEach((function(e){n.container.removeChild(e.nodeDiv)})),this.renders.length=0,this.caches.length=0,this.items.length=0},n}(),g=t(7),b=t(11),m=(d=function(n,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])})(n,e)},function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}d(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}),_=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var o,i,a=t.call(n),r=[];try{for(;(void 0===e||e-- >0)&&!(o=a.next()).done;)r.push(o.value)}catch(n){i={error:n}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return r},y=i.a.log.bind(null,"[@BannerPlugin]");function v(n){return new Promise((function(e,o){t(287)("./".concat(n)).then((function(n){var t=n.default;e(t)})).catch(i.a.warn)}))}var x=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e._showing=!0,e.bannerConfig={},e.taskMap=new Set,e.reqGiftBannerData=function(){y("\u8bf7\u6c42\u793c\u7269\u6a2a\u5e45\u6570\u636e")},e.reqActivityData=function(){y("\u8bf7\u6c42\u6d3b\u52a8\u6a2a\u5e45\u6570\u636e")},e.giftBanner=function(n){if(y("\u6536\u5230\u6a2a\u5e45\u6d88\u606f","\u623f\u95f4:".concat(n.drid,", \u793c\u7269:").concat(n.gn)),e._showing&&e.bannerConfig[String(n.gfid)]){var t=e.giftBannerQuery(n),o=t.head,i=t.body,a=t.tail,r=t.colors,p=t.fontSize,s=t.deteTime;Promise.all([v(o),v(i),v(a)]).then((function(t){var o=_(t,3),i=o[0],a=o[1],d=o[2],c=null;c=1===n.atype?e.getGiftSpecialContent(n,r,p):e.getGiftContent(n,r,p);var l={headUrl:i,bodyUrl:a,tailUrl:d,bodyWidth:e.computeFontSize(c,p),content:c,jumpUrl:Number(e.hisroom)===n.drid?"":"/".concat(n.drid),deteTime:s},u=setTimeout((function(){e.render.add(l),e.taskMap.delete(u)}),1e3);e.taskMap.add(u)})).catch((function(n){y("\u8d44\u6e90\u8f7d\u5165\u5931\u8d25\uff1a".concat(n))}))}},e.giftBannerQuery=function(n){return{head:n.gfid+"_head.png",body:n.gfid+"_body.png",tail:n.gfid+"_tail.png",colors:e.bannerConfig[String(n.gfid)].colors,fontSize:"17px",deteTime:10}},e.getGiftContent=function(n,t,o){var i=e.getSpan(o,t[0],n.sn),a=e.getSpan(o,t[1],"\u8d60\u9001\u7ed9"),r=e.getSpan(o,t[2],n.dn),p=e.getSpan(o,t[3],n.gc+"\u4e2a"+n.gn+"\uff0c\u5feb\u6765\u56f4\u89c2\u5427\uff01"),s=document.createElement("span");s.append(i,a,r,p);var d=s.outerHTML;return s.remove(),d},e.getGiftSpecialContent=function(n,t,o){var i=e.getSpan(o,t[0],n.sn),a=e.getSpan(o,t[1],"\u5728"),r=e.getSpan(o,t[2],n.dn+" "),p=e.getSpan(o,t[3],'\u76f4\u64ad\u95f4\u4ece"\u5e78\u8fd0\u5f69\u86cb"\u4e2d\u5f00\u51fa"'.concat(n.gn,'"')),s=e.getSpan(o,t[2]," x"+n.gc),d=document.createElement("span");d.append(i,a,r,p,s);var c=d.outerHTML;return d.remove(),c},e.nextBoxBanner=function(n){y("\u6536\u5230\u9b54\u76d2\u6a2a\u5e45\u6d88\u606f",n);var t=e.nextBoxBannerQuery(),o=t.head,i=t.body,a=t.tail,r=t.colors,p=t.fontSize,s=t.deteTime;Promise.all([v(o),v(i),v(a)]).then((function(t){var o=_(t,3),i=o[0],a=o[1],d=o[2],c=e.getNextBoxContent(n,r,p),l={headUrl:i,bodyUrl:a,tailUrl:d,bodyWidth:e.computeFontSize(c,p),content:c,jumpUrl:Number(e.hisroom)===n.drid?"next":"/".concat(n.drid,"?next=1"),deteTime:s},u=setTimeout((function(){e.render.add(l),e.taskMap.delete(u)}),1e3);e.taskMap.add(u)})).catch((function(n){y("\u8d44\u6e90\u8f7d\u5165\u5931\u8d25\uff1a".concat(n))}))},e.nextBoxBannerQuery=function(){return{head:"next_head.png",body:"next_body.png",tail:"next_tail.png",colors:["#faee00","#ffffff"],fontSize:"17px",deteTime:10}},e.getNextBoxContent=function(n,t,o){var i=e.getSpan(o,t[0],n.nn),a=e.getSpan(o,t[1],"\u5728"),r=e.getSpan(o,t[0],n.dn),p=e.getSpan(o,t[1],"\u4ece\u201c\u9b54\u76d2\u201d\u4e2d\u5f00\u51fa\u201c".concat(n.gn,"\u201dX").concat(n.cnt)),s=document.createElement("span");s.append(i,a,r,p);var d=s.outerHTML;return s.remove(),d},e.activityBanner=function(n){y("\u6536\u5230520\u7206\u706f\u6d3b\u52a8\u6d88\u606f",n);var t=e.giftActivityQuery(n),o=t.head,i=t.body,a=t.tail,r=t.colors,p=t.fontSize,s=t.deteTime;Promise.all([v(o),v(i),v(a)]).then((function(t){var o=_(t,3),i=o[0],a=o[1],d=o[2],c=e.getActivityContent(n,r,p),l={headUrl:i,bodyUrl:a,tailUrl:d,bodyWidth:e.computeFontSize(c,p),content:c,jumpUrl:Number(e.hisroom)===n.rid?"":"/".concat(n.rid),deteTime:s},u=setTimeout((function(){e.render.add(l),e.taskMap.delete(u)}),1e3);e.taskMap.add(u)})).catch((function(n){y("\u8d44\u6e90\u8f7d\u5165\u5931\u8d25\uff1a".concat(n))}))},e.giftActivityQuery=function(n){var e="",t="",o="";1===n.lt?(e="lamp_2_head.png",t="lamp_2_body.png",o="lamp_2_tail.png"):2===n.lt?(e="lamp_0_head.png",t="lamp_0_body.png",o="lamp_0_tail.png"):y("\u6ca1\u627e\u5230 \u6a2a\u5e45\u56fe\u7247");return{head:e,body:t,tail:o,colors:["#ffff00","#ffffff"],fontSize:"17px",deteTime:10}},e.getActivityContent=function(n,t,o){var i=e.getSpan(o,t[0],n.nm),a=e.getSpan(o,t[1],n.lm),r=document.createElement("span");r.append(i,a);var p=r.outerHTML;return r.remove(),p},e.getSpan=function(n,e,t){var o=document.createElement("span");return o.style.fontSize=n,o.style.color=e,o.innerText=t,o},e.computeFontSize=function(n,e){var t=document.createElement("span");t.style.fontSize=e,t.style.opacity="0",t.innerHTML=n,document.body.append(t);var o=t.offsetWidth;return t.remove(),o},e}return m(e,n),e.prototype.startup=function(n){var e,t,o,i=this;y("\u63d2\u4ef6\u542f\u52a8",this.name,n.mounted.id),this.hisroom=n.rid,this.render=new h(n.pluginContainer,n),this.render.start(),(e=g.a.host,t=g.a.port,o="".concat(e).concat(""===t?"":":".concat(t)),r.a.get("".concat(o).concat(b.a.BANNERS)).then((function(n){return n.data})).catch((function(){return[]}))).then((function(n){i.bannerConfig=n})).catch((function(n){y("\u52a0\u8f7d\u6a2a\u5e45\u914d\u7f6e\u5931\u8d25",n),i.bannerConfig={}}))},e.prototype.notify=function(n){var e=n.type,t=n.payload;switch(e){case c.b.BANNER:this.giftBanner(t);break;case c.b.NEXTBOX:this.nextBoxBanner(t);break;case c.b.ACTIVITY:this.activityBanner(t);break;case c.b.HIDE:this.showing=!1;break;case c.b.SHOW:this.showing=!0}},Object.defineProperty(e.prototype,"showing",{set:function(n){this._showing=n,this.render.visiable=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"BANNER"},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){y("\u63d2\u4ef6\u542f\u52a8\u9500\u6bc1",this.name),this.taskMap.forEach((function(n){clearTimeout(n)})),this.taskMap.clear()},e}(o.a);e.default=x}}]);